<!--
  Generated template for the MileagesetupPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  
    <ion-navbar>
      <ion-title>MILEAGE SETUP</ion-title>
    </ion-navbar>
  
  </ion-header>
  
  
  <ion-content padding>
  
    <ion-fab top right edge>
      <button ion-fab mini (click)="AddMileageClick()"><ion-icon name="add"></ion-icon></button>
    </ion-fab>
  
    <!--For Display Grid -->
    <ion-list>
      <ion-item class="bgColor-lightGrey">
        <ion-label>S.No</ion-label>
        <ion-label class="textRight" item-end>CATEGORY</ion-label>
        <ion-label class="textRight" item-end>MILAGE PER UNIT</ion-label>
        <ion-label class="textRight" item-end>EFFECTIVE DATE</ion-label>
        <ion-label class="textRight" item-end>ACTIVE FLAG</ion-label>
        <ion-label class="textRight" item-end>ACTION</ion-label>
  
      </ion-item>
      <ion-item *ngFor="let mileage of mileages; let i=index">
        <ion-label item-start>{{i+1}}</ion-label>
        <ion-label item-start class="textRight">{{mileage.CATEGORY}}</ion-label>
        <ion-label item-start class="textRight">{{mileage.RATE_PER_UNIT}}</ion-label>
        <ion-label item-start class="textRight">{{mileage.RATE_DATE}}</ion-label>
        <!-- <ion-datetime displayFormat="DD/MM/YYYY">{{mileage.RATE_DATE}}</ion-datetime> -->
  
        <ion-toggle *ngIf="mileage.ACTIVATION_FLAG==1" checked=true></ion-toggle>
        <ion-toggle *ngIf="mileage.ACTIVATION_FLAG==0" checked=false></ion-toggle>
  
        <button ion-button item-end (click)="EditClick(mileage.MILEAGE_GUID)"><ion-icon name="md-create"></ion-icon></button>
        <button ion-button item-end (click)="DeleteClick(mileage.MILEAGE_GUID)"><ion-icon name="md-close"></ion-icon></button>
      </ion-item>
    </ion-list>
    <!--Display Grid End-->
  
    <!-- add mileage form start-->
    <div class="blackcontainer" *ngIf="AddMileageClicked">
    </div>
    <div class="popup" padding *ngIf="AddMileageClicked">
  
      <ion-card>
        <ion-card-header class="icTitle headerColor-white ">
          <div class="icHeaderText">REGISTER NEW MILEAGE</div>
          <button class="btnR" (click)="CloseMileageClick()">
            <ion-icon name="md-close"></ion-icon> 
          </button>
        </ion-card-header>
  
        <ion-list>
          <form [formGroup]="Mileageform">
            <ion-item>
              <ion-label stacked>{{"CATEGORY"}}</ion-label>
              <ion-input type="text" formControlName="CATEGORY" [(ngModel)]="CATEGORY_ngModel_Add"  
               required placeholder="{{'Please fill in the category of the mileage'}}"></ion-input>
            </ion-item> 
   
            <ion-item>
              <ion-label stacked>{{"MILEAGE PER UNIT"}}</ion-label>
              <ion-input type="text" formControlName="RATE_PER_UNIT" [(ngModel)]="RATE_PER_UNIT_ngModel_Add" placeholder="{{'Please fill in the unit of mileage'}}"></ion-input>
            </ion-item>
  
            <ion-item>
              <ion-label stacked>{{"EFFECTIVE DATE"}}</ion-label>
              <ion-datetime displayFormat="DD/MM/YYYY" formControlName="RATE_DATE" [(ngModel)]="RATE_DATE_ngModel_Add" placeholder="{{'Please choose your effective date'}}"></ion-datetime>
            </ion-item>
  
            <ion-item>
              <ion-label stacked>{{"ACTIVE"}}</ion-label>
              <ion-toggle formControlName="ACTIVATION_FLAG" [(ngModel)]="ACTIVATION_FLAG_ngModel_Add"></ion-toggle>
            </ion-item>
            <div class="btn">
              <button ion-button class="bgColor-grey fontColor-white btnStyle1" [disabled]="!Mileageform.valid" (click)="Save()">{{"SUBMIT" | translate}}</button>
            </div>
          </form>
        </ion-list>
  
      </ion-card>
  
    </div>
    <!-- add mileage form end-->
  
    <!-- edit mileage form start-->
    <div class="blackcontainer" *ngIf="EditMileageClicked">
    </div>
    <div class="popup" padding *ngIf="EditMileageClicked">
      <ion-card>
        <ion-card-header class="icTitle headerColor-white ">
          <div class="icHeaderText">UPDATE MILEAGE</div>
          <button class="btnR" (click)="CloseMileageClick()">
            <ion-icon name="md-close"></ion-icon> 
          </button>
        </ion-card-header>
  
        <ion-list>
          <form [formGroup]="Mileageform">
            <!-- ng-pattern="/^[a-zA-Z][a-zA-Z0-9\\s]+$/" -->
            <ion-item>
              <ion-label stacked>{{"CATEGORY"}}</ion-label>
              <ion-input type="text" formControlName="CATEGORY" [(ngModel)]="CATEGORY_ngModel_Edit"  required placeholder="{{'Please fill in the category in the mileage'}}" required></ion-input>
            </ion-item>

            <!-- <ion-item *ngIf="CATEGORY.hasError('required') && CATEGORY.touched" class="invalid">
              <p>* category is required!</p>
          </ion-item> -->
  
  
            <ion-item>
              <ion-label stacked>{{"MILEAGE PER UNIT"}}</ion-label>
              <ion-input type="text" formControlName="RATE_PER_UNIT" [(ngModel)]="RATE_PER_UNIT_ngModel_Edit" 
                placeholder="{{'Please fill in the mileage'}}"></ion-input>
            </ion-item>
  
            <ion-item>
              <ion-label stacked>{{"EFFECTIVE DATE"}}</ion-label>
              <ion-datetime displayFormat="DD/MM/YYYY" formControlName="RATE_DATE" [(ngModel)]="RATE_DATE_ngModel_Edit" placeholder="{{'Please choose your effective date'}}"></ion-datetime>
            </ion-item>
  
            <ion-item>
              <ion-label stacked>{{"ACTIVE FLAG"}}</ion-label>
              <ion-toggle formControlName="ACTIVATION_FLAG" [(ngModel)]="ACTIVATION_FLAG_ngModel_Edit"></ion-toggle>
            </ion-item>
  
            <div class="btn">
              <button ion-button class="bgColor-grey fontColor-white btnStyle1" [disabled]="!Mileageform.valid" (click)="!Update(mileage_details.MILEAGE_GUID)">{{"SUBMIT" | translate}}</button>
            </div>
  
          </form>
        </ion-list>
  
      </ion-card>
    </div>
    <!-- edit mileage form end-->
  
  </ion-content>